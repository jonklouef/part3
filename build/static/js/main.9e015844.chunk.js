(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(14),i=t.n(o),u=(t(19),t(3)),a=t(0),l=function(e){return Object(a.jsx)("form",{onSubmit:e.filter,children:Object(a.jsxs)("div",{children:["Filter names: ",Object(a.jsx)("input",{value:e.newFilter,onChange:e.handleFilter})]})})},s=function(e){return Object(a.jsxs)("form",{onSubmit:e.addPerson,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:e.newNbr,onChange:e.handleNbrChange})]}),Object(a.jsx)("button",{type:"submit",children:"Add"})]})},d=function(e){var n=e.persons,t=e.newFilter,c=e.removePersons;return""===t?Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:n.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{width:"150",children:e.name}),Object(a.jsx)("td",{children:e.number}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name,"?"))&&c(e.id)},children:"Delete"})})]},e.id)}))})}):Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{width:"150",children:e.name}),Object(a.jsx)("td",{children:e.number}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name,"?"))&&c(e.id)},children:"Delete"})})]},e.id)}))})})},j=function(e){var n=e.notification;return null===n[0]?null:"err"===n[1]?Object(a.jsx)("div",{className:"error",children:n[0]}):Object(a.jsx)("div",{className:"note",children:n[0]})},b=t(4),f=t.n(b),h="/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},newPerson:function(e){return f.a.post(h,e).then((function(e){return e.data}))},newNumber:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},removePerson:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data.persons}))}},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),i=Object(u.a)(o,2),b=i[0],f=i[1],h=Object(c.useState)(""),O=Object(u.a)(h,2),x=O[0],p=O[1],v=Object(c.useState)(""),w=Object(u.a)(v,2),g=w[0],C=w[1],N=Object(c.useState)([null]),P=Object(u.a)(N,2),F=P[0],T=P[1];Object(c.useEffect)((function(){m.getAll().then((function(e){r(e)})).catch((function(e){T(["".concat(e),"err"]),setTimeout((function(){T([null,"err"])}),4e3)}))}),[]);var S=function(e){e.preventDefault();var n=t.find((function(e){return e.name===b})),c={name:b,number:x};if(n&&window.confirm("".concat(b," is already in the phonebook. Do you want to update the number?"))){var o=n.id;m.newNumber(o,c).then((function(e){r(t.map((function(n){return n.id!==o?n:e})),T(["Number updated for ".concat(b),"note"]),setTimeout((function(){T([null,"note"])}),4e3))})).catch((function(e){T(["".concat(e),"err"]),setTimeout((function(){T([null,"err"])}),4e3)}))}else m.newPerson(c).then((function(e){r(t.concat(e),T(["Added ".concat(b),"note"]),setTimeout((function(){T([null,"note"])}),4e3))})).catch((function(e){e.response?(T(["".concat(e.response.data),"err"]),setTimeout((function(){T([null,"err"])}),4e3)):e.request?(T(["".concat(e.request),"err"]),setTimeout((function(){T([null,"err"])}),4e3),console.log(e.request)):(T(["".concat(e),"err"]),setTimeout((function(){T([null,"err"])}),4e3))}));f(""),p("")};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(j,{notification:F}),Object(a.jsx)(l,{newFilter:g,handleFilter:function(e){C(e.target.value)},filter:function(e){e.preventDefault(),C("")}}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(s,{addPerson:S,newName:b,handleNameChange:function(e){f(e.target.value)},newNbr:x,handleNbrChange:function(e){p(e.target.value)}}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(d,{persons:t,newFilter:g,addPerson:S,removePersons:function(e){var n=t.find((function(n){return n.id===e})).name,c=t.filter((function(n){return n.id!==e}));m.removePerson(e).then(r(c),T(["".concat(n," deleted"),"note"]),setTimeout((function(){T([null,"note"])}),4e3)).catch((function(e){T(["".concat(e),"err"]),setTimeout((function(){T([null,"err"])}),4e3)}))}})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),o(e),i(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(O,{})}),document.getElementById("root")),x()}},[[39,1,2]]]);
//# sourceMappingURL=main.9e015844.chunk.js.map